{"version":3,"sources":["main.js"],"names":["Site","animationSpeed","mobileThreshold","init","_this","this","fixWidows","Menu","Countdown","$","window","resize","onResize","WhatIsVideo","EarlyTestersVideo","document","ready","Modules","each","string","html","replace","isVimeo","$player","vimeoUrl","attr","undefined","vimeoOptions","url","title","$vimeo","Vimeo","Player","handleVimeo","$video","on","handleClick","bind","hasClass","pause","removeClass","play","addClass","$iframe","find","iframeHeight","iframeWidth","width","css","$mobileHeader","mobileHeaderOffset","outerHeight","innerHeight","height","section","data","isMobile","scrollTo","length","toggleClass","$target","headerOffset","stop","animate","scrollTop","offset","top","dayInSeconds","hoursInSeconds","interval","$countdown","$countdownDays","$countdownHours","$countdownMinutes","$countdownSeconds","end","now","moment","utc","nowUnixTimestampSeconds","format","secondsRemaining","checkFinished","displayRemainingTime","setInterval","daysRemaining","daysRemainingRemainder","text","displayValueFromFloat","hoursRemaining","hoursRemainingRemainder","minutesRemaining","minutesRemainingRemainder","clearInterval","remove","input","padNumber","Math","floor","n","Array","join","played","$videos","threshold","bindScroll","event","handleScroll","playAnimation","off","index","video","loop","setTimeout","callback","bindHover"],"mappings":"AAGAA,MACEC,eAAgB,IAChBC,gBAAiB,IACjBC,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAME,YAELF,MAAMG,KAAKJ,OACXC,MAAMI,UAAUL,OAEjBM,EAAEC,QAAQC,OAAO,WACfP,MAAMQ,WAENR,MAAMS,YAAYD,WAClBR,MAAMU,kBAAkBF,aAG1BH,EAAEM,UAAUC,MAAM,WAChBZ,MAAMS,YAAYV,OAClBC,MAAMU,kBAAkBX,OACxBC,MAAMa,QAAQd,UAKlBS,SAAU,aAKVN,UAAW,WAETG,EAAE,kBAAkBS,KAAK,WACvB,GAAIC,QAASV,EAAEJ,MAAMe,MACrBD,QAASA,OAAOE,QAAQ,YAAY,YACpCZ,EAAEJ,MAAMe,KAAKD,YAKnBnB,KAAKa,aACHS,SAAS,EACTnB,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAMmB,QAAUd,EAAE,wBAElB,IAAIe,UAAWpB,MAAMmB,QAAQE,KAAK,iBAElC,IAAID,cAAwBE,IAAZF,SAAuB,CACrCpB,MAAMkB,SAAU,CAEhB,IAAIK,eACFC,IAAKJ,SACLK,OAAO,EAGTzB,OAAM0B,OAAS,GAAIC,OAAMC,OAAO,uBAAwBL,cAExDvB,MAAM6B,kBAEN7B,OAAM8B,OAASzB,EAAE,kBAEjBL,MAAMmB,QAAQY,GAAG,QAAS/B,MAAMgC,YAAYC,KAAKjC,SAIrDgC,YAAa,WACX,GAAIhC,OAAQC,IAERD,OAAMmB,QAAQe,SAAS,YACzBlC,MAAM8B,OAAO,GAAGK,QAChBnC,MAAMmB,QAAQiB,YAAY,aAE1BpC,MAAM8B,OAAO,GAAGO,OAChBrC,MAAMmB,QAAQmB,SAAS,aAI3BT,YAAa,WACX,GAAI7B,OAAQC,IAEZD,OAAM0B,OAAOK,GAAG,SAAU,WACxB/B,MAAMuC,QAAUvC,MAAMmB,QAAQqB,KAAK,UACnCxC,MAAMyC,iBAGRzC,MAAM0B,OAAOK,GAAG,OAAQ,WACtB/B,MAAMmB,QAAQmB,SAAS,aAGzBtC,MAAM0B,OAAOK,GAAG,QAAS,WACvB/B,MAAMmB,QAAQiB,YAAY,cAI9BK,aAAc,WACZ,GAAIzC,OAAQC,KACRyC,YAAc1C,MAAMuC,QAAQI,QAC5BF,aAAgBC,YAAc,GAAM,CAExC1C,OAAMuC,QAAQK,IAAI,SAAUH,aAAe,OAG7CjC,SAAU,WACR,GAAIR,OAAQC,IAERD,OAAMkB,SACRlB,MAAMyC,iBAOZ7C,KAAKc,mBACHQ,SAAS,EACTnB,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAMmB,QAAUd,EAAE,8BAElB,IAAIe,UAAWpB,MAAMmB,QAAQE,KAAK,iBAElC,IAAID,cAAwBE,IAAZF,SAAuB,CACrCpB,MAAMkB,SAAU,CAEhB,IAAIK,eACFC,IAAKJ,SACLK,OAAO,EAGTzB,OAAM0B,OAAS,GAAIC,OAAMC,OAAO,6BAA8BL,cAE9DvB,MAAM6B,kBAEN7B,OAAM8B,OAASzB,EAAE,wBAEjBL,MAAMmB,QAAQY,GAAG,QAAS/B,MAAMgC,YAAYC,KAAKjC,SAIrDgC,YAAa,WACX,GAAIhC,OAAQC,IAERD,OAAMmB,QAAQe,SAAS,YACzBlC,MAAM8B,OAAO,GAAGK,QAChBnC,MAAMmB,QAAQiB,YAAY,aAE1BpC,MAAM8B,OAAO,GAAGO,OAChBrC,MAAMmB,QAAQmB,SAAS,aAI3BT,YAAa,WACX,GAAI7B,OAAQC,IAEZD,OAAM0B,OAAOK,GAAG,SAAU,WACxB/B,MAAMuC,QAAUvC,MAAMmB,QAAQqB,KAAK,UACnCxC,MAAMyC,iBAGRzC,MAAM0B,OAAOK,GAAG,OAAQ,WACtB/B,MAAMmB,QAAQmB,SAAS,aAGzBtC,MAAM0B,OAAOK,GAAG,QAAS,WACvB/B,MAAMmB,QAAQiB,YAAY,cAI9BK,aAAc,WACZ,GAAIzC,OAAQC,KACRyC,YAAc1C,MAAMuC,QAAQI,QAC5BF,aAAgBC,YAAc,GAAM,CAExC1C,OAAMuC,QAAQK,IAAI,SAAUH,aAAe,OAG7CjC,SAAU,WACR,GAAIR,OAAQC,IAERD,OAAMkB,SACRlB,MAAMyC,iBAKZ7C,KAAKO,MACHJ,KAAM,WACJ,GAAIC,OAAQC,IAEZ4C,eAAgBxC,EAAE,kBAElBL,MAAM8C,mBAAqBD,cAAcE,eAAiBF,cAAcG,cAAgBH,cAAcI,UAEtG5C,EAAE,gBAAgB0B,GAAG,QAAS,WAC5B,GAAImB,SAAU7C,EAAEJ,MAAMkD,KAAK,UACvBC,SAAW/C,EAAEJ,MAAMiC,SAAS,kBAEhClC,OAAMqD,SAASH,QAASE,YAIvB/C,EAAE,gBAAgBiD,QACnBjD,EAAE,gBAAgB0B,GAAG,QAAS,WAC5B1B,EAAE,QAAQkD,YAAY,gBAK5BF,SAAU,SAASH,QAASE,UAC1B,GAAIpD,OAAQC,KACRuD,QAAUnD,EAAE,YAAc6C,SAC1BO,aAAe,CAEfL,YACFK,aAAezD,MAAM8C,oBAGvBzC,EAAE,QAAQ+B,YAAY,aACtB/B,EAAE,cAAcqD,OAAOC,SAAUC,UAAWJ,QAAQK,SAASC,IAAML,cAAgB7D,KAAKC,kBAI5FD,KAAKQ,WACH2D,aAAc,MACdC,eAAgB,KAChBC,aAAU3C,GAEVvB,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAMkE,WAAa7D,EAAE,cACrBL,MAAMmE,eAAiB9D,EAAE,mBACzBL,MAAMoE,gBAAkB/D,EAAE,oBAC1BL,MAAMqE,kBAAoBhE,EAAE,sBAC5BL,MAAMsE,kBAAoBjE,EAAE,sBAG5BL,MAAMuE,IAAMvE,MAAMkE,WAAWf,KAAK,MAElC,IAAIqB,KAAMC,SAASC,MACfC,wBAA0BH,IAAII,OAAO,IAGzC5E,OAAM6E,iBAAmB7E,MAAMuE,IAAMI,wBAGrC3E,MAAM8E,gBACN9E,MAAM+E,uBAGN/E,MAAMiE,SAAW3D,OAAO0E,YAAY,WAClChF,MAAM6E,mBAEN7E,MAAM8E,gBACN9E,MAAM+E,wBACL,MAILA,qBAAsB,WACpB,GAAI/E,OAAQC,KAIRgF,cAAgBjF,MAAM6E,iBAAmB7E,MAAM+D,aAC/CmB,uBAAyBlF,MAAM6E,iBAAmB7E,MAAM+D,YAE5D/D,OAAMmE,eAAegB,KAAKnF,MAAMoF,sBAAsBH,eAEtD,IAAII,gBAAiBH,uBAAyBlF,MAAMgE,cAEpDhE,OAAMoE,gBAAgBe,KAAKnF,MAAMoF,sBAAsBC,gBAEvD,IAAIC,yBAA0BJ,uBAAyBlF,MAAMgE,eAEzDuB,iBAAmBD,wBAA0B,EAEjDtF,OAAMqE,kBAAkBc,KAAKnF,MAAMoF,sBAAsBG,kBAEzD,IAAIC,2BAA4BF,wBAA0B,EAE1DtF,OAAMsE,kBAAkBa,KAAKnF,MAAMoF,sBAAsBI,6BAG3DV,cAAe,WACb,GAAI9E,OAAQC,IAGRD,OAAM6E,kBAAoB,IAC5BvE,OAAOmF,cAAczF,MAAMiE,UAG3B5D,EAAE,sBAAsBqF,WAI5BN,sBAAuB,SAASO,OAG9B,MAFY1F,MAEC2F,UAAUC,KAAKC,MAAMH,SAGpCC,UAAW,SAASG,GAIlB,MAFAA,IAAQ,GAEDA,EAAEzC,QAAU,EAAIyC,EAAI,GAAIC,OAAM,EAAID,EAAEzC,OAAS,GAAG2C,KAAK,KAAOF,IAIvEnG,KAAKiB,SACHqF,QAAQ,EACRrC,OAAQ,EACR9D,KAAM,WACJ,GAAIC,OAAQC,IAEZD,OAAMmG,QAAU9F,EAAE,iBAElBL,MAAMoG,UAAYpG,MAAMmG,QAAQtC,SAASC,IAAOzD,EAAEC,QAAQ2C,SAAW,EAAK,EAE1EjD,MAAMqG,cAGRA,WAAY,WACV,GAAIrG,OAAQC,IAGZI,GAAEC,QAAQyB,GAAG,sBAAuB,SAASuE,OAE3C,GAAI1C,WAAYvD,EAAEC,QAAQsD,WAG1B5D,OAAMuG,aAAa3C,cAIvB2C,aAAc,SAAS3C,WACrB,GAAI5D,OAAQC,MAERD,MAAMkG,QAAUtC,UAAY5D,MAAMoG,YACpCpG,MAAMwG,gBACNnG,EAAEC,QAAQmG,IAAI,yBAIlBD,cAAe,WACb,GAAIxG,OAAQC,IAEZD,OAAMkG,QAAS,EAEflG,MAAMmG,QAAQrF,KAAM,SAAS4F,OAC3B,GAAIC,OAAQ1G,IAEZ0G,OAAMC,MAAO,EAEbC,WAAY,SAASC,UACnBH,MAAMtE,OAENhC,EAAEsG,OAAO5E,GAAG,QAAS,WACnB9B,KAAK2G,MAAO,EACZ5G,MAAM+G,UAAU9G,SAEjBD,MAAM6D,OAAS6C,WAQxB9G,KAAKG","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  animationSpeed: 666,\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    _this.fixWidows();\n\n     _this.Menu.init();\n     _this.Countdown.init();\n\n    $(window).resize(function(){\n      _this.onResize();\n\n      _this.WhatIsVideo.onResize();\n      _this.EarlyTestersVideo.onResize();\n    });\n\n    $(document).ready(function () {\n      _this.WhatIsVideo.init();\n      _this.EarlyTestersVideo.init();\n      _this.Modules.init();\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.WhatIsVideo = {\n  isVimeo: false,\n  init: function() {\n    var _this = this;\n\n    _this.$player = $('#what-is-video-player');\n\n    var vimeoUrl = _this.$player.attr('data-vimeo-url');\n\n    if (vimeoUrl && vimeoUrl != undefined) {\n      _this.isVimeo = true;\n\n      var vimeoOptions = {\n        url: vimeoUrl,\n        title: false\n      };\n\n      _this.$vimeo = new Vimeo.Player('what-is-video-player', vimeoOptions);\n\n      _this.handleVimeo();\n    } else {\n      _this.$video = $('#what-is-video');\n\n      _this.$player.on('click', _this.handleClick.bind(_this));\n    }\n  },\n\n  handleClick: function() {\n    var _this = this;\n\n    if (_this.$player.hasClass('playing')) {\n      _this.$video[0].pause();\n      _this.$player.removeClass('playing');\n    } else {\n      _this.$video[0].play();\n      _this.$player.addClass('playing');\n    }\n  },\n\n  handleVimeo: function() {\n    var _this = this;\n\n    _this.$vimeo.on('loaded', function() {\n      _this.$iframe = _this.$player.find('iframe');\n      _this.iframeHeight();\n    });\n\n    _this.$vimeo.on('play', function() {\n      _this.$player.addClass('playing');\n    });\n\n    _this.$vimeo.on('pause', function() {\n      _this.$player.removeClass('playing');\n    });\n  },\n\n  iframeHeight: function() {\n    var _this = this;\n    var iframeWidth = _this.$iframe.width();\n    var iframeHeight = (iframeWidth / 16) * 9;\n\n    _this.$iframe.css('height', iframeHeight + 'px');\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.isVimeo) {\n      _this.iframeHeight();\n    }\n  },\n};\n\n\n\nSite.EarlyTestersVideo = {\n  isVimeo: false,\n  init: function() {\n    var _this = this;\n\n    _this.$player = $('#early_testers-video-player');\n\n    var vimeoUrl = _this.$player.attr('data-vimeo-url');\n\n    if (vimeoUrl && vimeoUrl != undefined) {\n      _this.isVimeo = true;\n\n      var vimeoOptions = {\n        url: vimeoUrl,\n        title: false\n      };\n\n      _this.$vimeo = new Vimeo.Player('early_testers-video-player', vimeoOptions);\n\n      _this.handleVimeo();\n    } else {\n      _this.$video = $('#early_testers-video');\n\n      _this.$player.on('click', _this.handleClick.bind(_this));\n    }\n  },\n\n  handleClick: function() {\n    var _this = this;\n\n    if (_this.$player.hasClass('playing')) {\n      _this.$video[0].pause();\n      _this.$player.removeClass('playing');\n    } else {\n      _this.$video[0].play();\n      _this.$player.addClass('playing');\n    }\n  },\n\n  handleVimeo: function() {\n    var _this = this;\n\n    _this.$vimeo.on('loaded', function() {\n      _this.$iframe = _this.$player.find('iframe');\n      _this.iframeHeight();\n    });\n\n    _this.$vimeo.on('play', function() {\n      _this.$player.addClass('playing');\n    });\n\n    _this.$vimeo.on('pause', function() {\n      _this.$player.removeClass('playing');\n    });\n  },\n\n  iframeHeight: function() {\n    var _this = this;\n    var iframeWidth = _this.$iframe.width();\n    var iframeHeight = (iframeWidth / 16) * 9;\n\n    _this.$iframe.css('height', iframeHeight + 'px');\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.isVimeo) {\n      _this.iframeHeight();\n    }\n  },\n};\n\nSite.Menu = {\n  init: function() {\n    var _this = this;\n\n    $mobileHeader = $('#mobile-header');\n    // mobile scrollTo offset = mobile header height + top padding + bottom padding\n    _this.mobileHeaderOffset = $mobileHeader.outerHeight() + ($mobileHeader.innerHeight() - $mobileHeader.height());\n\n    $('.js-scrollto').on('click', function() {\n      var section = $(this).data('scroll');\n      var isMobile = $(this).hasClass('mobile-scrollto');\n\n      _this.scrollTo(section, isMobile);\n    });\n\n    // Mobile Menu\n    if($('#menu-toggle').length) {\n      $('#menu-toggle').on('click', function() {\n        $('body').toggleClass('menu-open');\n      });\n    }\n  },\n\n  scrollTo: function(section, isMobile) {\n    var _this = this;\n    var $target = $('#section-' + section);\n    var headerOffset = 0;\n\n    if (isMobile) {\n      headerOffset = _this.mobileHeaderOffset;\n    }\n\n    $('body').removeClass('menu-open');\n    $('html, body').stop().animate({ scrollTop: $target.offset().top - headerOffset }, Site.animationSpeed);\n  }\n};\n\nSite.Countdown = {\n  dayInSeconds: 60 * 60 * 24,\n  hoursInSeconds: 60 * 60,\n  interval: undefined,\n\n  init: function() {\n    var _this = this;\n\n    _this.$countdown = $('#countdown');\n    _this.$countdownDays = $('#countdown-days');\n    _this.$countdownHours = $('#countdown-hours');\n    _this.$countdownMinutes = $('#countdown-minutes');\n    _this.$countdownSeconds = $('#countdown-seconds');\n\n    // get end time from markup\n    _this.end = _this.$countdown.data('end');\n\n    var now = moment().utc();\n    var nowUnixTimestampSeconds = now.format('X');\n\n    // calculate seconds between endtime and now\n    _this.secondsRemaining = _this.end - nowUnixTimestampSeconds;\n\n    // check if already finished, then display countdown values\n    _this.checkFinished();\n    _this.displayRemainingTime();\n\n    // setup interval to count down each second and update the display values\n    _this.interval = window.setInterval(function() {\n      _this.secondsRemaining--;\n\n      _this.checkFinished();\n      _this.displayRemainingTime();\n    }, 1000);\n\n  },\n\n  displayRemainingTime: function() {\n    var _this = this;\n\n    // each of these calculates the remaining values from the seconds remaining, then calculates the remainder of seconds to be used in the next step, then displays the values\n\n    var daysRemaining = _this.secondsRemaining / _this.dayInSeconds;\n    var daysRemainingRemainder = _this.secondsRemaining % _this.dayInSeconds;\n\n    _this.$countdownDays.text(_this.displayValueFromFloat(daysRemaining));\n\n    var hoursRemaining = daysRemainingRemainder / _this.hoursInSeconds;\n\n    _this.$countdownHours.text(_this.displayValueFromFloat(hoursRemaining));\n\n    var hoursRemainingRemainder = daysRemainingRemainder % _this.hoursInSeconds;\n\n    var minutesRemaining = hoursRemainingRemainder / 60;\n\n    _this.$countdownMinutes.text(_this.displayValueFromFloat(minutesRemaining));\n\n    var minutesRemainingRemainder = hoursRemainingRemainder % 60;\n\n    _this.$countdownSeconds.text(_this.displayValueFromFloat(minutesRemainingRemainder));\n  },\n\n  checkFinished: function() {\n    var _this = this;\n\n    // if there are no seconds remaining kill the countdown\n    if (_this.secondsRemaining <= 0) {\n      window.clearInterval(_this.interval);\n\n      // perhaps we have a better solution but for now just remove the countdown\n      $('#section-countdown').remove();\n    }\n  },\n\n  displayValueFromFloat: function(input) {\n    var _this = this;\n\n    return _this.padNumber(Math.floor(input));\n  },\n\n  padNumber: function(n) {\n    // adapted from https://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript#10073788\n    n = n + '';\n\n    return n.length >= 2 ? n : new Array(2 - n.length + 1).join('0') + n;\n  },\n};\n\nSite.Modules = {\n  played: false,\n  offset: 0, // ms offset between each video play init\n  init: function() {\n    var _this = this;\n\n    _this.$videos = $('.module-video');\n\n    _this.threshold = _this.$videos.offset().top - ($(window).height() / 3) * 2;\n\n    _this.bindScroll();\n  },\n\n  bindScroll: function() {\n    var _this = this;\n\n    // On window scroll\n    $(window).on('scroll.playOnScroll', function(event) {\n      // Get the scroll position\n      var scrollTop = $(window).scrollTop();\n\n      // ...handle it\n      _this.handleScroll(scrollTop);\n    });\n  },\n\n  handleScroll: function(scrollTop) {\n    var _this = this;\n\n    if(!_this.played && scrollTop > _this.threshold) { // First video is to play and postition is below threshold\n      _this.playAnimation();\n      $(window).off('scroll.playOnScroll');\n    }\n  },\n\n  playAnimation: function() {\n    var _this = this;\n\n    _this.played = true;\n\n    _this.$videos.each( function(index) {\n      var video = this;\n\n      video.loop = true;\n\n      setTimeout( function(callback) {\n        video.play();\n\n        $(video).on('ended', function() {\n          this.loop = true;\n          _this.bindHover(this);\n        });\n      }, _this.offset * index);\n    });\n\n\n  },\n\n};\n\nSite.init();\n"]}