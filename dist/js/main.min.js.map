{"version":3,"sources":["main.js"],"names":["Site","animationSpeed","mobileThreshold","init","_this","this","fixWidows","Menu","Countdown","$","window","resize","onResize","videoWrapper","InlineVideo","document","ready","windowWidth","width","each","string","html","replace","$wrapper","parent","ratio","attr","hasClass","windowHeight","height","headerHeight","outerHeight","css","marginTop","marginLeft","addClass","margin-top","margin-left","vimeoPlayers","index","player","vimeoUrl","undefined","vimeoOptions","url","title","Vimeo","Player","bindVimeo","on","handleClick","$player","$video","find","pause","removeClass","play","iframeHeight","element","iframe","$iframe","iframeWidth","Math","round","length","section","data","isMobile","headerOffset","getHeaderOffset","scrollTo","toggleClass","$header","innerHeight","$target","stop","animate","scrollTop","offset","top","dayInSeconds","hoursInSeconds","interval","$countdown","$countdownDays","$countdownHours","$countdownMinutes","$countdownSeconds","end","now","moment","utc","nowUnixTimestampSeconds","format","secondsRemaining","checkFinished","displayRemainingTime","setInterval","daysRemaining","daysRemainingRemainder","text","displayValueFromFloat","hoursRemaining","hoursRemainingRemainder","minutesRemaining","minutesRemainingRemainder","clearInterval","remove","input","padNumber","floor","n","Array","join"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Site, Modernizr */\n\nSite = {\n  animationSpeed: 666,\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    _this.fixWidows();\n\n     _this.Menu.init();\n     _this.Countdown.init();\n\n\n    $(window).resize(function(){\n      _this.onResize();\n      _this.videoWrapper();\n      _this.InlineVideo.onResize();\n    });\n\n    $(document).ready(function () {\n      _this.videoWrapper();\n      _this.InlineVideo.init();\n    });\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    Site.Menu.windowWidth = $(window).width();\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  videoWrapper: function() {\n    $('.wrapped-video').each(function() {\n      // the video wrapper element\n      var $wrapper = $(this).parent('.video-wrapper');\n\n      // the video aspect ratio from data attr\n      var ratio = $(this).attr('data-ratio');\n\n      if ($(this).hasClass('splash-video')) {\n        // is splash video\n\n        var windowHeight = $(window).height();\n\n        // get height of visible header (mobile or desktop)\n        var headerHeight = $('.header:visible').outerHeight();\n\n        // set height of video and get height for wrapper\n        var height = $(this).css('height', windowHeight - headerHeight + 'px').height();\n      } else {\n        // is not splash video\n\n        // get height of video\n        var height = $(this).parent().parent().width();\n      }\n\n      var width = (height * ratio);\n      var marginTop = -(height / 2);\n      var marginLeft = -((height * ratio) / 2);\n\n      // set height and width of wrapper - 5px\n      $wrapper.css({\n        'width': width - 5 + 'px',\n        'height': height - 5 + 'px'\n      });\n\n      // set height and width of video, set margins for absolute centering\n      $(this).addClass('show').css({\n        'width': width + 'px',\n        'height': height + 'px',\n        'margin-top': marginTop + 'px',\n        'margin-left': marginLeft + 'px',\n      });\n    });\n  },\n};\n\nSite.InlineVideo = {\n  vimeoPlayers: [],\n  init: function() {\n    var _this = this;\n\n    // Iterate thru players\n    $('.inline-video-player').each(function(index,player) {\n\n      // Check if vimeo url exists as an attribute\n      var vimeoUrl = $(player).attr('data-vimeo-url');\n\n      if (vimeoUrl && vimeoUrl !== undefined) { // If Vimeo\n        var vimeoOptions = {\n          url: vimeoUrl,\n          title: false\n        };\n\n        _this.vimeoPlayers[index] = new Vimeo.Player(player, vimeoOptions);\n\n        _this.bindVimeo(_this.vimeoPlayers[index]);\n      } else { // Else is HTML video\n        $(player).on('click', _this.handleClick);\n      }\n    });\n  },\n\n  handleClick: function() {\n    var $player = $(this);\n    var $video = $player.find('.inline-video');\n\n    if ($player.hasClass('playing')) {\n      $video[0].pause();\n      $player.removeClass('playing');\n    } else {\n      $video[0].play();\n      $player.addClass('playing');\n    }\n  },\n\n  bindVimeo: function($player) {\n    var _this = this;\n\n    $player.on('loaded', function() {\n      _this.iframeHeight(this.element);\n    });\n\n    $player.on('play', function() {\n      $(this.element).parent('.inline-video-player').addClass('playing');\n    });\n\n    $player.on('pause', function() {\n      $(this.element).parent('.inline-video-player').removeClass('playing');\n    });\n  },\n\n  iframeHeight: function(iframe) {\n    var $iframe = $(iframe);\n    var iframeWidth = Math.round($iframe.width());\n    var iframeHeight = iframeWidth / 16 * 9;\n\n    // We add 6 pixels more to the height, so the iframe fits better\n    // This is a hack by @cas\n    iframeHeight += 6;\n\n    $iframe.css('height', iframeHeight + 'px');\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if (_this.vimeoPlayers.length > 0) {\n      $(_this.vimeoPlayers).each( function(index,player) {\n        _this.iframeHeight(player.element);\n      });\n    }\n  },\n};\n\nSite.Menu = {\n  init: function() {\n    var _this = this;\n\n    _this.windowWidth = $(window).width();\n\n    $('.js-scrollto').on('click', function() {\n      var section = $(this).data('scroll');\n      var isMobile = $(this).hasClass('mobile-scrollto');\n      var headerOffset = _this.getHeaderOffset(isMobile);\n\n      _this.scrollTo(section, headerOffset);\n    });\n\n    // Mobile Menu\n    if($('#menu-toggle').length) {\n      $('#menu-toggle').on('click', function() {\n        $('body').toggleClass('menu-open');\n      });\n    }\n  },\n\n  getHeaderOffset: function(isMobile) {\n    var _this = this;\n    var $header = $('#header');\n\n    if (isMobile) {\n      $header = $('#mobile-header');\n    }\n\n    // scrollTo offset = header height + top padding + bottom padding\n    return $header.outerHeight() + ($header.innerHeight() - $header.height());\n  },\n\n  scrollTo: function(section, headerOffset) {\n    var _this = this;\n    var $target = $('#section-' + section);\n\n    $('body').removeClass('menu-open');\n    $('html, body').stop().animate({ scrollTop: $target.offset().top - headerOffset }, Site.animationSpeed);\n  }\n};\n\nSite.Countdown = {\n  dayInSeconds: 60 * 60 * 24,\n  hoursInSeconds: 60 * 60,\n  interval: undefined,\n\n  init: function() {\n    var _this = this;\n\n    _this.$countdown = $('#countdown');\n    _this.$countdownDays = $('#countdown-days');\n    _this.$countdownHours = $('#countdown-hours');\n    _this.$countdownMinutes = $('#countdown-minutes');\n    _this.$countdownSeconds = $('#countdown-seconds');\n\n    // get end time from markup\n    _this.end = _this.$countdown.data('end');\n\n    var now = moment().utc();\n    var nowUnixTimestampSeconds = now.format('X');\n\n    // calculate seconds between endtime and now\n    _this.secondsRemaining = _this.end - nowUnixTimestampSeconds;\n\n    // check if already finished, then display countdown values\n    _this.checkFinished();\n    _this.displayRemainingTime();\n\n    // setup interval to count down each second and update the display values\n    _this.interval = window.setInterval(function() {\n      _this.secondsRemaining--;\n\n      _this.checkFinished();\n      _this.displayRemainingTime();\n    }, 1000);\n\n  },\n\n  displayRemainingTime: function() {\n    var _this = this;\n\n    // each of these calculates the remaining values from the seconds remaining, then calculates the remainder of seconds to be used in the next step, then displays the values\n\n    var daysRemaining = _this.secondsRemaining / _this.dayInSeconds;\n    var daysRemainingRemainder = _this.secondsRemaining % _this.dayInSeconds;\n\n    _this.$countdownDays.text(_this.displayValueFromFloat(daysRemaining));\n\n    var hoursRemaining = daysRemainingRemainder / _this.hoursInSeconds;\n\n    _this.$countdownHours.text(_this.displayValueFromFloat(hoursRemaining));\n\n    var hoursRemainingRemainder = daysRemainingRemainder % _this.hoursInSeconds;\n\n    var minutesRemaining = hoursRemainingRemainder / 60;\n\n    _this.$countdownMinutes.text(_this.displayValueFromFloat(minutesRemaining));\n\n    var minutesRemainingRemainder = hoursRemainingRemainder % 60;\n\n    _this.$countdownSeconds.text(_this.displayValueFromFloat(minutesRemainingRemainder));\n  },\n\n  checkFinished: function() {\n    var _this = this;\n\n    // if there are no seconds remaining kill the countdown\n    if (_this.secondsRemaining <= 0) {\n      window.clearInterval(_this.interval);\n\n      // perhaps we have a better solution but for now just remove the countdown\n      $('#section-countdown').remove();\n    }\n  },\n\n  displayValueFromFloat: function(input) {\n    var _this = this;\n\n    return _this.padNumber(Math.floor(input));\n  },\n\n  padNumber: function(n) {\n    // adapted from https://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript#10073788\n    n = n + '';\n\n    return n.length >= 2 ? n : new Array(2 - n.length + 1).join('0') + n;\n  },\n};\n\nSite.init();\n"]}