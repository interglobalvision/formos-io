Site={animationSpeed:666,mobileThreshold:601,init:function(){var _this=this;_this.fixWidows(),_this.Menu.init(),$(window).resize(function(){_this.onResize()}),$(document).ready(function(){_this.SplashVideo.init(),_this.WhatIsVideo.init(),_this.Modules.init()})},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var string=$(this).html();string=string.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(string)})}},Site.SplashVideo={playing:!1,toPlay:0,init:function(){var _this=this;_this.$videos=$(".splash-video"),_this.$video1=$("#splash-video-1"),_this.$video1.on("canplaythrough.video1",_this.handleCanPlayThrough.bind(_this)),_this.canAutoplay=!0,_this.threshold=100},handleCanPlayThrough:function(){var _this=this;_this.$video1.off("canplaythrough.video1"),_this.bindScroll()},bindScroll:function(){var _this=this;$(window).scroll(function(event){var scrollTop=$(window).scrollTop();_this.handleScroll(scrollTop)})},handleScroll:function(scrollTop){var _this=this;_this.canAutoplay&&(!_this.toPlay&&scrollTop>_this.threshold?_this.playAndSwitch():_this.toPlay&&scrollTop<.8*_this.threshold&&_this.playAndSwitch())},playAndSwitch:function(){var _this=this,$videoToPlay=$(_this.$videos[_this.toPlay]);_this.playing||($videoToPlay[0].play(),_this.playing=!0,$videoToPlay.on("ended",function(event){_this.playing=!1,_this.$videos.removeClass("u-hidden"),$videoToPlay.addClass("u-hidden"),$videoToPlay[0].currentTime=0,_this.toPlay=_this.toPlay?0:1,$videoToPlay.off("ended"),WP.wp_debug&&$("#video-displayed").text(_this.toPlay),_this.handleScroll($(window).scrollTop())}))}},Site.WhatIsVideo={$player:$("#what-is-video-player"),$video:$("#what-is-video"),init:function(){var _this=this;_this.$player.on("click",_this.handleClick.bind(_this))},handleClick:function(){var _this=this;_this.$player.hasClass("playing")?(_this.$video[0].pause(),_this.$player.removeClass("playing")):(_this.$video[0].play(),_this.$player.addClass("playing"))}},Site.Menu={init:function(){var _this=this;$(".js-scrollto").on("click",function(){var section=$(this).data("scroll");_this.scrollTo(section)})},scrollTo:function(section){var $target=$("#section-"+section);$("html, body").stop().animate({scrollTop:$target.offset().top},Site.animationSpeed)}},Site.Modules={init:function(){var _this=this;_this.$videos=$(".module-video"),_this.bind()},bind:function(){var _this=this;_this.$videos.on("mouseover.videoModule",function(event){this.play()}),_this.$videos.on("mouseleave",function(event){this.pause()})}},Site.init();
//# sourceMappingURL=main.min.js.map
