Site={animationSpeed:666,mobileThreshold:601,init:function(){var _this=this;_this.fixWidows(),_this.Menu.init(),_this.Countdown.init(),$(window).resize(function(){_this.onResize()}),$(document).ready(function(){_this.SplashVideo.init(),_this.WhatIsVideo.init(),_this.Modules.init()})},onResize:function(){this.SplashVideo.onResize()},fixWidows:function(){$(".js-fix-widows").each(function(){var string=$(this).html();string=string.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(string)})}},Site.SplashVideo={playing:!1,toPlay:0,init:function(){var _this=this;$("#splash-video-container").length&&(_this.$videos=$(".splash-video"),_this.$video1=$("#splash-video-1"),_this.$video1[0].readyState>3?_this.bindScroll():_this.$video1.on("canplaythrough.video1",_this.handleCanPlayThrough.bind(_this)),_this.canAutoplay=!0,_this.threshold=_this.$video1.offset().top-$(window).height()/3*2)},onResize:function(){var _this=this;_this.threshold=_this.$video1.offset().top-$(window).height()/3*2},handleCanPlayThrough:function(){var _this=this;_this.$video1.off("canplaythrough.video1"),_this.bindScroll()},bindScroll:function(){var _this=this;$(window).scroll(function(event){var scrollTop=$(window).scrollTop();_this.handleScroll(scrollTop)})},handleScroll:function(scrollTop){var _this=this;_this.canAutoplay&&(!_this.toPlay&&scrollTop>_this.threshold?_this.playAndSwitch():_this.toPlay&&scrollTop<.8*_this.threshold&&_this.playAndSwitch())},playAndSwitch:function(){var _this=this,$videoToPlay=$(_this.$videos[_this.toPlay]);_this.playing||($videoToPlay[0].play(),_this.playing=!0,$videoToPlay.on("ended",function(event){_this.playing=!1,_this.$videos.removeClass("u-hidden"),$videoToPlay.addClass("u-hidden"),$videoToPlay[0].currentTime=0,_this.toPlay=_this.toPlay?0:1,$videoToPlay.off("ended"),WP.wp_debug&&$("#video-displayed").text(_this.toPlay),_this.handleScroll($(window).scrollTop())}))}},Site.WhatIsVideo={$player:$("#what-is-video-player"),$video:$("#what-is-video"),init:function(){var _this=this;_this.$player.on("click",_this.handleClick.bind(_this))},handleClick:function(){var _this=this;_this.$player.hasClass("playing")?(_this.$video[0].pause(),_this.$player.removeClass("playing")):(_this.$video[0].play(),_this.$player.addClass("playing"))}},Site.Menu={init:function(){var _this=this;$(".js-scrollto").on("click",function(){var section=$(this).data("scroll");_this.scrollTo(section)})},scrollTo:function(section){var $target=$("#section-"+section);$("html, body").stop().animate({scrollTop:$target.offset().top},Site.animationSpeed)}},Site.Countdown={dayInSeconds:86400,hoursInSeconds:3600,interval:void 0,init:function(){var _this=this;_this.$countdown=$("#countdown"),_this.$countdownDays=$("#countdown-days"),_this.$countdownHours=$("#countdown-hours"),_this.$countdownMinutes=$("#countdown-minutes"),_this.$countdownSeconds=$("#countdown-seconds"),_this.end=_this.$countdown.data("end");var now=moment().utc(),nowUnixTimestampSeconds=now.format("X");_this.secondsRemaining=_this.end-nowUnixTimestampSeconds,_this.checkFinished(),_this.displayRemainingTime(),_this.interval=window.setInterval(function(){_this.secondsRemaining--,_this.checkFinished(),_this.displayRemainingTime()},1e3)},displayRemainingTime:function(){var _this=this,daysRemaining=_this.secondsRemaining/_this.dayInSeconds,daysRemainingRemainder=_this.secondsRemaining%_this.dayInSeconds;_this.$countdownDays.text(_this.displayValueFromFloat(daysRemaining));var hoursRemaining=daysRemainingRemainder/_this.hoursInSeconds;_this.$countdownHours.text(_this.displayValueFromFloat(hoursRemaining));var hoursRemainingRemainder=daysRemainingRemainder%_this.hoursInSeconds,minutesRemaining=hoursRemainingRemainder/60;_this.$countdownMinutes.text(_this.displayValueFromFloat(minutesRemaining));var minutesRemainingRemainder=hoursRemainingRemainder%60;_this.$countdownSeconds.text(_this.displayValueFromFloat(minutesRemainingRemainder))},checkFinished:function(){var _this=this;_this.secondsRemaining<=0&&(window.clearInterval(_this.interval),$("#section-countdown").remove())},displayValueFromFloat:function(input){return this.padNumber(Math.floor(input))},padNumber:function(n){return n+="",n.length>=2?n:new Array(2-n.length+1).join("0")+n}},Site.Modules={played:!1,offset:0,init:function(){var _this=this;_this.$videos=$(".module-video"),_this.threshold=_this.$videos.offset().top-$(window).height()/3*2,_this.bindScroll()},bindHover:function(video){$(video).on("mouseover.videoModule",function(event){this.play()}),$(video).on("mouseleave",function(event){this.pause()})},bindScroll:function(){var _this=this;$(window).scroll(function(event){var scrollTop=$(window).scrollTop();_this.handleScroll(scrollTop)})},handleScroll:function(scrollTop){var _this=this;!_this.played&&scrollTop>_this.threshold&&_this.playAnimation()},playAnimation:function(){var _this=this;_this.played=!0,_this.$videos.each(function(index){var video=this;setTimeout(function(callback){video.play(),$(video).on("ended",function(){this.loop=!0,_this.bindHover(this)})},_this.offset*index)})}},Site.init();
//# sourceMappingURL=main.min.js.map
